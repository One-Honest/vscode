<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>100.正则表达式之日期格式化高级</title>
</head>
<body>
    <script>
        /* 格式化回顾:[\n是换行;\t是空格]
        let date=new Date();
        function formartDate(date){
            return `${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()}\n${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;
        }
        let res=formartDate(date);
        console.log(res);
         */
        let currentTime=new Date();
        console.log(currentTime);
        let res1=dateFormart("yy-MM-dd hh:mm:ss",currentTime);
        let res2=dateFormart("yy-MM-dd",currentTime);
        let res3=dateFormart("hh:mm:ss",currentTime);
        console.log(res1);
        console.log(res2);
        console.log(res3);
        function dateFormart(fmt,date){
        //1.处理年:1.1找到yyyy
            //let reg=/y+/;   // +号在正则表达式中表示匹配一个或多个指定字符;
            let yearStr=fmt.match(/y+/);//提取字符串中的y
            if(yearStr){
                yearStr=yearStr[0];
                //1.2.获取当前的年
            let yearNum=date.getFullYear()+"";//将获取的当前的年转化为字符串;
            yearNum=yearNum.substr(4-yearStr.length);//获取当前的年的长度随着字符串中年的长度变化而变化;
            //1.3利用当前的年替换掉yyyy
            fmt=fmt.replace(yearStr,yearNum);
            } 
            
        //2.处理其他的时间
            let obj={
                "M+":date.getMonth()+1,
                "d+":date.getDate(),
                "h+":date.getHours(),
                "m+":date.getMinutes(),
                "s+":date.getSeconds(),
            }
            //2.1遍历取出所有的时间
            for(let key in obj){
                let reg=new RegExp(`${key}`);//创建一个正则表达式并插入字符串;
                //取出格式化字符串中对应的格式字符
                let fmtStr=fmt.match(reg);
                if(fmtStr){
                    fmtStr=fmtStr[0];
                    //单独处理一位或者两位的时间显示
                    if(fmtStr.length===1){//一位时间显示
                    //将获取的现在的时间替换掉格式字符;
                        fmt=fmt.replace(fmtStr,obj[key]);
                    }else{//两位时间显示
                        let numStr="00"+obj[key];
                        numStr=numStr.substr((obj[key]+"").length);//将当前的时间转换为字符串然后获取其字符串长度作为截取当前时间显示为两位数的索引;
                        fmt=fmt.replace(fmtStr,numStr);
                    }
                }
            }
        //3.将格式化之后的字符串返回;
            return fmt;
            console.log(fmt);          
        }
    </script>
</body>
</html>